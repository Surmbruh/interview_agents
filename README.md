# 🎓 Multi-Agent Interview Coach

Мультиагентная система для проведения технических интервью с использованием LangGraph. 
Проект реализует продвинутые механизмы планирования сессии, классификации интентов и контроля качества (Self-Correction).

## 🏗️ Архитектура

Система реализует **Agentic Workflow** со специализированными узлами:

```
┌──────────────┐      ┌──────────────┐      ┌────────────────┐
│  🚀 Planner  │ ───> │  🛡️ Router   │ ───> │  👁️ Observer    │
└──────────────┘      └──────┬───────┘      └────────┬───────┘
                             │                       │
                             ▼                       ▼
                      ┌──────────────────────────────────────┐
                      │          🎤 Interviewer              │
                      └──────────────────┬───────────────────┘
                                         │
                                         ▼
                      ┌──────────────────────────────────────┐
                      │          ⚖️ Quality Critic           │
                      └──────────────────┬───────────────────┘
                                         │ (Self-Correction Loop)
                                         ▼
                      ┌──────────────────────────────────────┐
                      │          📊 Feedback/Report          │
                      └──────────────────────────────────────┘
```

### Ключевые агенты:
1. **Planner**: (NEW) Один раз в начале сессии генерирует технический план (4-5 тем) на основе грейда и позиции.
2. **Router**: (Guardrail) Классифицирует ввод пользователя: Ответ, Вопрос о компании, Атака (Injection), или Стоп.
3. **Observer**: Анализирует техническую глубину ответов, детектирует галлюцинации и выбирает следующую тему из плана.
4. **Interviewer**: Ведёт диалог, адаптируя тон под инструкции Observer'а. Учитывает профиль компании.
5. **Quality Critic**: (Self-Correction) Проверяет каждый вопрос Интервьюера перед тем, как показать его пользователю. Если вопрос не соответствует грейду или повторяется — отправляет на перегенерацию.
6. **Manager**: Принимает финальное решение и формирует зачёт/незачёт с детальным планом развития.

## ✅ Соответствие требованиям

### Инфраструктурные стандарты (Infrastructure)
- ✅ **Pydantic Settings**: Валидация API ключей при старте.
- ✅ **Structured Output**: Все системные решения (Router, Planner, Observer, Critic) типизированы через Pydantic.
- ✅ **Tenacity**: Автоматические повторные попытки при ошибках API или парсинга.
- ✅ **Makefile**: Автоматизация развертывания и проверки.

### Функциональные фичи
- ✅ **Static Knowledge Base**: Фиксированный профиль компании/стека.
- ✅ **Guardrail Node**: Защита от промпт-инъекций и обработка смены ролей.
- ✅ **Bonus Search**: Использование DuckDuckGo для поиска реальных ссылок в Roadmap.

## 🚀 Быстрый старт

```bash
# 1. Установка
make install

# 2. Настройка
cp .env.example .env
# Отредактируйте .env, указав OPENAI_API_KEY

# 3. Запуск
make run

# 4. Проверка лога для жюри
make validate
```

## 📁 Доступные команды (Makefile)

- `make install`: Установка всех зависимостей.
- `make run`: Запуск приложения.
- `make validate`: Проверка структуры `interview_log.json` на соответствие техзаданию.
- `make test`: Запуск смоук-тестов (проверка графа и импортов).

## 📊 Формат лога

```json
{
  "participant_name": "Иван",
  "turns": [
    {
      "turn_id": 1,
      "internal_thoughts": {
        "analysis": "...",
        "decision": "MAINTAIN",
        "instruction": "..."
      },
      "user_input": "...",
      "agent_response": "..."
    }
  ],
  "final_feedback": "## Отчёт по интервью..."
}
```

## 📝 Лицензия

MIT
